
[[sec-data-content-and-structure]]
== Data Content and Structure

=== Introduction

This section describes the application schema, which is described in Unified Modelling Language (UML):

* Feature Catalogue; +
* Dataset types; +
* Geometry.

The Marine Weather Warnings Overlay is a feature-based vector product that contains meteorological and oceanographic datasets. The content information is described in terms of a General Feature Model and a Feature Catalogue.

=== Application Schema

S-412 conforms to the General Feature Model (GFM) outlined in S-100 Part 3 and is realised in Figure 4.1. The GFM is the conceptual model for feature and information types.

[[fig-general-feature-model]]
.S-412 General Feature Model
image::../images/S-412-General_Feature_Model.png[UML diagram depicting the S-412 General Feature Model]

The complete application schema is expressed in UML and is provided in Annex A (DCEG).

The data model consists of:

* five feature types which are derived from the *WeatherWarning* abstract type:

** *SignificantWaveHeightWarning*;
** *IceAccretionWarning*;
** *WindWarning*;
** *RestrictedVisibilityWarning*;
** *ThunderstormWarning*;

and,

* one information type:

** *DataProvider*.

These feature types are derived from the S-100_GF_FeatureType metaclass. Feature and information type descriptions can be found in Annex A.

This section describes the Application Schema as expressed in the UML diagrams included. This document contains an overview of the S-412 application schema. The S-412 Application Schema types are then realised in the Feature Catalogue. The Feature Catalogue can be found in the WMO Domain of the IHO Registry, and provides a full specification of all types including feature and information types, their attributes, allowed values, and the relationships between types in the data product.

The following conventions are used in the UML diagrams depicting the application schema:

*	Standard UML conventions for classes, associations, inheritance, roles, and multiplicities apply. These conventions are described in Part 1 of S-100. +
*	Italic font for a class name indicates an Abstract Class. +
*	Abstract Feature Classes are depicted with a blue background. +
*	Ordinary (non-abstract) feature classes are depicted with a green background. +
*	Information type classes are depicted with a grey background. There are no abstract information type classes in S-412. +
*	Association Classes are depicted with a white background. There are no association classes in S-412+
*	Complex attributes are depicted with a salmon background. +
*	Enumeration lists are depicted with a brown background. The numeric code corresponding to each listed value is shown to its right following an ‘=’ sign. +
*	No significance is attached to the colour of associations. (Complex diagrams may use different colours to distinguish associations that cross one another.). +
*	Where the association role or name is not explicitly shown, the default rules for the roles and names apply: +
  ** The role name is ‘the<CLASSNAME>’ where <CLASSNAME> is the name of the class to which that association end is linked. +
  ** The association name is ‘<CLASSNAME1>_<CLASSNAME2>’ where <CLASSNAME1> is the source and <CLASSNAME2> the target. In the case of a feature/information association, the feature is the source. For feature/feature or information/information associations without explicit names, the source/target are indicated by an arrowhead. +
*	Subclasses inherit the attributes and associations of their superclasses at all levels, unless such inheritance is explicitly overridden in the subclass.

Types for simple attributes are listed on the right hand side in the UML diagrams, e.g *issueDate* has the S-100 type *dateTime*. In order to simplfy the appearance of the diagrams, no types are stated for complex attributes or enumerations.

=== Feature Catalogue

==== Introduction

The S-412 Feature Catalogue describes real-world meteorological and oceanographic concepts in one or more sets of geographic data as feature types, information types, attributes, attribute values, associations and roles. These are bound together in the .XML Feature Catalogue.

Definitions of each feature type, information type, attribute, including enumerated value definitions, and associations are also provided in the Data Classification and Encoding Guide (Annex A) and represent concepts that may be encoded in an S-412 dataset. These definitions are drawn from the Feature Concept Dictionary managed by the IHO in the IHO Geospatial Information Registry .

==== Feature Types

Feature types are the basic level of classification in the Feature Catalogue, and are used in S-412 to represent warnings of atmospheric and oceanographic phenomena.

[[fig-s412-features]]
.S-412 features
image::../images/figure-s412-features.png[UML diagram depicting the S-412 Features]

As can be seen in the diagram, a single abstract feature *WeatherWarning* is used as a template from which the concrete features of S-412 are derived.

===== Meta Features

S-412 does not make use of any meta feature.

===== Geographic Features

Geographic (geo) feature types form the principal content in S-412 and are defined by their associated attributes and information types.

As an example, the realisation of a Wind Warning concept is provided by the UML diagram below. The diagram shows the Wind Warning feature’s inheritance from the abstract Weather Warning feature and its connection to various complex and simple attributes. For more information regarding the relationships between WindWarning and its attributes, please refer to the DCEG. The portrayal of a WindWarning is described in the Portrayal Catalogue. For each Marine Weather Warning polygon, the colour is determined by the attribute value of windWarningThreshold. The optional beaufortForce attribute is used to indicate more specific wind speed bins that the feature represents, based on the international Beaufort Wind Scale. The dateTimeRange attribute provides the start and end times that are valid for the Wind Warning. The weatherWarningNumber attribute provides an identification number to track warnings issued with each new dataset. The optional weatherWarningMessage attribute provides a short message with added context or information about a Weather Warning.

[[fig-wind-warning-feature]]
.Wind Warning feature
image::../images/S-412_Wind_Warning.png[UML diagram depicting the S-412 Wind Warning Feature with its attributes and associations.]

==== Information Types

Information types define identifiable pieces of information in a dataset that can be shared between other features or information types. Information types have attributes but have no relationship to any geometry; information types may also reference other information types if defined in the Feature Catalogue.

Figure 4.4 shows the realisation of the single information type used in S-412: *DataProvider*.

[[fig-data-provider-information-type]]
.Data Provider information type
image::../images/S-412_Information_Types.png[UML diagram depicting the S-412 Data Provider Information Type.]

==== Feature Relationship

A feature relationship links one or more instances of one feature type with one or more instances of the same or a different feature type. There are three common types of feature relationships: association, aggregation, and composition. S-412 does not make use of any feature relationships.

Associations are described in more detail in <<sect-Associations>>.

// An aggregation association is a relationship between two classes, in which one of the classes plays the role of container and the other plays the role of a containee. The aggregation association shall be used when the containee objects (that represent the parts of a container object) can exist without the container object.
//
// A composition association is a strong aggregation, where the containee object cannot exist without the container object. If a container object is deleted then all of its containee objects are deleted as well.

==== Attributes

Attributes define the characteristics of a feature or information type. Attribute types can be either complex or simple. Simple attributes carry the value itself, and complex attributes are aggregations of other simple and/or complex attributes that create a hierarchical data structure to describe a feature. An attribute instance belongs to one and only one feature or information type.

===== Simple Attributes

The following table lists the types of simple attributes used in S-412.

[cols="a,a",options="headers"]
|===
|Type |Definition 

|enumeration
|List of predetermined values that can be expanded and contracted.

|text
|A sequence of characters.

|dateTime
|Character encoding shall follow the format for date and time as specified in ISO 8601. +
Example: 19850412T101530.

|===

Simple attributes for the Wind Warning feature type are shown in <<fig-wind-warning-feature>> and the DataProvider information type in <<fig-data-provider-information-type>>. Each S-100 attribute type is listed next to their camel case encoding value. Enumerated attributes are referenced by their defined data type and values are listed.

Enumerated attributes defined for S-412, represented in UML are shown in <<fig-s412-enumerated-attributes>>. The complete list of all attributes and their properties approved for use in S-412 are also provided in the DCEG (Annex A).

[[fig-s412-enumerated-attributes]]
.S-412 Enumerated Attributes

image::../images/S-412_Enumerations.png[UML diagram depicting the S-412 Enumerated Attributes.]

===== Code Lists

Within S-100, codelist types may be used for open enumerations whose membership cannot be known at the level of the product specification, for reuse of information model fragments, or for more efficient catalogue management. 

Codelist types are not utilised in this version of S-412.

===== Complex Attributes

Complex attributes are aggregations of other attributes that are either simple or complex. The aggregation is defined by means of attribute bindings. The diagram below shows the complex attributes defined in S-412. By way of example, **fixedDateRange** is utilised by  the Wind Warning feature type shown in <<fig-wind-warning-feature>>. This attribute is an aggregation of 2 simple Time attributes and 2 simple S100_TruncatedDate attributes. In the diagram, attributes with no type defined are either enumerations or complex attributes.

For the full list of complex attributes approved for use in an S-412 dataset, refer to the DCEG (Annex A).

[[fig-s412-complex-attributes]]
.S-412 Complex Attributes
image::../images/S-412-Complex-Attributes.png[UML diagram depicting the S-412 Complex Attributes.]

[[sect-Associations]]
==== Associations

Associations are used to describe a relationship between instances of one feature or information type with instances of the same or a different feature or information type. Unless otherwise noted, associations are bi-directional in S-412. If an association is unidirectional, source and target roles are defined.

The diagram below shows an example of the association between the WeatherWarning feature type and the *DataProvider* information type called *DataProviderAssociation*. The real world relationship between these concepts is that a weather warning has additional information about the service(s) issuing the warning.

The diagram shows the real world relationship between a weather warning and its supplemental information for where it came from. A complete list of associations and roles used in S-412 can be found in the DCEG (Annex A).

[[fig-s412-data-provider-association]]
.S-412 Data Provider association
image::../images/figure-s412-data-provider-association.png[UML diagram depicting the S-412 Data Provider Association between a Weather Warning and a Data Provider.]

===== Camel Case Rules

All names in S-412 are unique in order to distinguish one from another. Further, camel case rules are applied in order to distinguish encoding values. Each class, package, type-specification and association name are concatenated and start with an uppercase letter with each subsequent word starting with a capital letter. Attribute and association role names are concatenated and start with a lower-case letter; subsequent words start with a capital letter.

Example: The *Wind Warning* feature type is encoded as *WindWarning*. The *Fixed Date Range* complex attribute type is encoded as *fixedDateRange*.

==== Multiplicity Rules

In UML, all attributes are mandatory by default. Multiplicity rules are used for attributes and association role names to provide a way of describing optional and conditional attributes. In these rules, the first number represents the minimum number of instances that may exist; the second number represents the maximum number of instances that may exist. For example, 0..* means many, optional, zero or more; 1..* means at least one. So, in the UML diagrams unless an attribute (complex or simple) has a specific multiplicity shown it can be assumed to be mandatory.

==== Inheritance

A hierarchical structure among S-412 feature types and information types exists in order to group similar concepts by definition, use cases or attribute sets. The base level of the hierarchy is commonly called the super-type and represents a generic concept. More specific concepts are the next level in the hierarchy and these are called sub-types. All sub-types inherit the properties of the super-type within the same hierarchical structure unless otherwise specified. Within S-412, inheritance creates flexibility for a data producer to utilise the appropriate feature based on their user’s needs.

In the *WindWarning* feature shown in <<fig-wind-warning-feature>>, *WindWarning* inherits all attributes and associations from the *WeatherWarning* abstract feature type.

==== Spatial Quality

Spatial quality attributes are commonly carried by S-100 based product specifications in an information class called Spatial Quality and describe the positional quality of an object. Because S-412 datasets are assumed to be composed of the highest quality position data available at the time of issuance, Spatial Quality is not utilised in S-412 Product Specification.

==== Temporal Quality

There is a direct relationship between temporal quality and spatial quality with S-412 datasets. Because S-412 datasets are assumed to be composed of the highest quality position data available at the time of issuance, it is necessary to ensure the temporal quality of the dataset. Temporal quality ensures spatial quality.

Various time attributes are carried by various features to ensure the end user is aware of when the dataset is published as well as when the data is valid. Together, these attributes in the data ensure the user is aware of the temporal quality of the data.

Refer to Annex A (DCEG) for more information regarding time-related attributes in S-412.

=== [[s4_start_review4]]Dataset Types[[s4_end_review4]]
[reviewer="IIC",date=2025-12-09,from=s4_start_review4,to=s4_end_review4]
****
The concept of Dataset types in S-100 generally distinguishes between New Dataset, New Edition and Update. The subject in this clause is different.
Suggest renaming the clause or moving (preferred option) the information in existant clauses (ex. attributes). 
****

==== Introduction

A dataset is a grouping of features, attributes, geometry, and metadata which comprises a specific geographic coverage. Only one type of S-412 dataset is supported: 1) GML encoding for surface geometric primitive feature collections.

==== Multiple datasets

In order to facilitate the efficient processing and exchange of S-412 data, S-412 data files will be split by the time and date in which the file’s data is valid.

=== Geometry

==== S-100 Level 3a Geometry

Weather warning features are encoded as vector entities which conform to S-100 geometry configuration level 3a (see S-100 Part 7, clause 7-4.3).

The underlying geometry of an S-412 dataset is constrained to level 3a which supports 0, 1 and 2 geometric dimensional objects (points, curves and surfaces) as defined by S-100 Part 7 – Spatial Schema. This product specification uses only one type of geometry: S100:Surface with gml PolygonPatch.

Level 3a is described by the following constraints:

* Each curve must reference a start and end point (they may be the same).
*	Curves must not self-intersect. See <<fig-level-3a-geometric-rules>>
*	Areas are represented by a closed loop of curves beginning and ending at a common point.
*	In the case of areas with holes, all internal boundaries must be completely contained within the external boundary and the internal boundaries must not intersect each other or the external boundary. Internal boundaries may touch tangentially (i.e. at one point). See Figure 9.
*	The outer boundary of a surface must be in a clockwise direction (surface to the right of the curve) and the curve orientation positive. The inner boundary of a surface must be in a counter-clockwise direction (surface to the right of the curve) and the curve orientation negative. See Figure 9.

[[fig-level-3a-geometric-rules]]
.Level3a Geometric Rules
image::../images/figure-level-3a-geometric-rules.png[UML diagram depicting the Level 3a Geometric Rules.]

S-412 further constraints Level 3a with the following:

*	Coincident linear geometry must be avoided when there is a dependency between features. 
*	Curve interpolation may be utilised to represent a variety of curve types. Curve interpolation may also be utilised for inner and outer boundaries for polygons. 
*	Curves, including interpolations, and areas should avoid crossing the 180° longitude.




